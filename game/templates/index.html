<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Подключение bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
    <title>Блэкджек</title>
</head>
<body>
<style>
  .field {
      position: absolute;
      left: 50%;
      top: 50%;
      -webkit-transform: translate(-50%, -50%);
      transform: translate(-50%, -50%);
}
</style>
<!-- Подключение статистических файлов -->
{% load static %}
<div class="main" style="background-color: #255E29; height: 100vh">
<div class="field"> <!-- Игровое поле -->
    <div class="dealer d-flex justify-content-center align-items-center"> <!-- Поле дилера -->
        <div class="dealer-cards d-flex justify-content-center"> <!-- Карты дилера -->
            {% if not dealer_turn %} <!-- Если не ход дилера -->
            <img src="{% static 'card-back2.png' %}"> <!-- Карта закрыта -->
            {% endif %}
        {% for card in dealer_cards %} <!-- Показать каждую карту из руки дилера -->
            <img src="{% static card.image %}">
            {% endfor %}
        </div>
        <div class="dealer-points d-flex justify-content-center"> <!-- Очки дилера -->
            {% if dealer_sum %}
            <h5 class="text-light">Очки дилера: {{dealer_sum}}</h5>
            {% endif %}
        </div>
    </div>
    <div class="player flex-column d-flex justify-content-center align-items-center">
        <div class="player-field align-items-center d-flex justify-content-center mb-2"> <!-- Поле игрока -->
            <div class="player-cards d-flex justify-content-center"> <!-- Карты игрока -->
            {% for card in player_cards %} <!-- Отображение всех карт с руки игрока -->
                <img src="{% static card.image %}">
            {% endfor %}
            </div>
            <div class="player-points d-flex justify-content-center"> <!-- Очки игрока -->
                {% if player_sum %}
                <h5 class="text-light">Очки игрока: {{player_sum}}</h5>
                {% endif %}
            </div>
        </div>
        <div class="player-ui flex-column align-items-center d-flex justify-content-center"> <!-- Интерфейс игрока (кнопки) -->
            <div class="player-bid flex-column d-flex justify-content-center align-items-center"> <!-- Поле для ставок -->
                {% if message and loser%} <!-- Если игрок проиграл -->
                <h5 class="text-danger">{{message}}</h5>
                {% elif message and winner %}  <!-- Если игрок победил -->
                <h5 class="text-success">{{message}}</h5>
                {% elif message and draw %} <!-- Если ничья -->
                <h5 class="text-warning">{{message}}</h5>
                {% endif %}
                <form method="POST" class="d-flex justify-content-center align-items-center" action="/"> <!-- Форма ставок -->
                    {% csrf_token %} <!-- Токен для защиты -->
                    <h5 class="text-light">Ставка: </h5>
                    {% if first_run or loser %} <!-- Если началась новая партия или игрок проиграл -->
                    <input class="form-control ms-2" name="bid"> <!-- Поле для ввода ставки -->
                    <button class="form-control ms-2" type="submit">Поставить</button> <!-- Кнопка подтверждения ставки -->
                    {% else %}
                    <h5 class="text-warning">{{bid}}</h5> <!-- Отображение ставки после подтверждения -->
                    {% endif %}
                </form>
                <h5 class="text-light ms-2">Банк: {{bank}}</h5> <!-- Остаток в банке игрока -->
                {% if bank == 0 and loser %} <!-- Если не осталось денег в банке и игрок проиграл -->
                <a class="button form-control" href="/restart">Обновить банк</a>
                {% endif %}
            </div>
            <div class="player-actions d-flex align-items-center"> <!-- Действия игрока -->
                {% if not loser and not winner and not draw and not first_run %} <!-- Если игра не окончена или не начало новой партии -->
                <a class="button form-control" href="/hit">Hit</a> <!-- Взять еще одну карту -->
                <a class="button form-control" href="/stand">Stand</a> <!-- Передать ход дилеру -->
                <a class="button form-control" href="/double">Double</a> <!-- Удвоить ставку -->
                <a class="button form-control" href="/surrender">Surrender</a> <!-- Сдать карты и потерять половину ставки -->
                {% endif %}
            </div>
        </div>
    </div>
</div>
</div>
</body>
</html>